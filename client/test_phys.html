<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="../node_modules/d3/build/d3.min.js"></script>
    <script src="../node_modules/d3-selection-multi/build/d3-selection-multi.min.js"></script>
    <script src="../node_modules/webcola/WebCola/cola.min.js"></script>


    <style>
        .old{
            fill:none;
            stroke-dasharray: 1,2;
            stroke: black;

        }
        .new{
            fill-opacity: .3;
            stroke: none;
        }

    </style>

</head>
<body>

<svg id="vis" width="800" height="800">

</svg>



<script>

    addRects = (classLabel, rs) => {
        const myRect = d3.select('#vis').selectAll("." + classLabel).data(rs);
        myRect.exit().remove();

        const myRectEnter = myRect.enter().append('rect').attr('class', classLabel);

        myRectEnter.merge(myRect).attrs({
            x: d => d.x,
            y: d => d.y,
            width: d => d.X - d.x,
            height: d => d.Y - d.y,
        })

    }


    const rs = [null, null, null]

    rs[0] = new cola.Rectangle(10, 10 + 20, 10, 10 + 20);
    rs[1] = new cola.Rectangle(15, 15 + 20, 10, 10 + 20);
    rs[2] = new cola.Rectangle(10, 10 + 20, 13, 16 + 20);

    addRects('old',rs);

    cola.removeOverlaps(rs);

    addRects('new',rs);

    console.log(rs, "--- rs");


    //
    // var rs = new Array(rects.length);
    // var dims = [];
    // rects.forEach(function (r, i) {
    //     var x = r.attr('x'), y = r.attr('y'), w = r.attr('width'), h = r.attr('height');
    //     dims.push({ x: x, y: y, w: w, h: h });
    //     rs[i] = new cola.Rectangle(x, x + w, y, y + h);
    // });
    // undoStack.push(dims);
    // cola.removeOverlaps(rs);
    // rects.forEach(function (r, i) {
    //     var t = rs[i];
    //     if (animate) {
    //         r.animate().move(t.x, t.y);
    //     } else {
    //         r.move(t.x, t.y);
    //     }
    // });
    //


</script>


</body>
</html>